{% extends 'base.html' %}

{% block content %}
    <div class="container-plan-trip">
        <h1>Travel Details</h1>
        <form action="{% url 'core:plan-trip' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="place">Destination:</label>
                <input type="text" id="place" name="place" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div class="form-group">
                <label for="place">Start Location:</label>
                <input type="text" id="start_location" name="start_location" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div class="form-group">
                <label for="number_of_people">Number of People:</label>
                <input type="number" id="number_of_people" name="number_of_people" min="1" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div class="form-group" >
                <label>Type of Trip:</label>
                <input type="checkbox" id="relaxation" name="trip_type" value="Relaxation">
                <label for="relaxation">Relaxation</label>
                <input type="checkbox" id="hiking" name="trip_type" value="Hiking/Trekking">
                <label for="hiking">Hiking/Trekking</label>
                <input type="checkbox" id="adventure" name="trip_type" value="Adventure">
                <label for="adventure">Adventure</label>
                <input type="checkbox" id="family" name="trip_type" value="Family">
                <label for="family">Family</label>
                <input type="checkbox" id="beaches" name="trip_type" value="Beaches">
                <label for="beaches">Beaches</label>
                <input type="checkbox" id="road_trip" name="trip_type" value="Road Trip">
                <label for="road_trip">Road Trip</label>
                <input type="checkbox" id="everything" name="trip_type" value="A Little Bit of Everything">
                <label for="everything">A Little Bit of Everything</label>
                <input type="checkbox" id="wildlife" name="trip_type" value="Wildlife">
                <label for="everything">Wildlife</label>
                <input type="checkbox" id="culture" name="trip_type" value="Culture">
                <label for="everything">Culture</label>
                <input type="checkbox" id="local_cuisines" name="trip_type" value="Local Cuisines">
                <label for="everything">Local Cuisines</label>
                <input type="checkbox" id="photography" name="trip_type" value="Photography">
                <label for="everything">Photography</label>
                <!-- Add more options if needed -->
            </div>

            <div class="form-group">
                <label for="budget">Budget(Includes all travellers):</label>
                <input type="number" id="budget" name="budget" min="0" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div class="form-group">
                <label for="trip_start_date">Trip Start Date:</label>
                <input type="date" id="trip_start_date" name="trip_start_date" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <!-- Trip End Date -->
            <div class="form-group">
                <label for="trip_end_date">Trip End Date:</label>
                <input type="date" id="trip_end_date" name="trip_end_date" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <!-- Automatically Calculated Number of Days -->
            <div class="form-group">
                <label for="number_of_days">Number of Days:</label>
                <input type="number" id="number_of_days" name="number_of_days" min="1" required readonly style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div class="form-group" >
                <button type="submit" class="submit-button" style="padding: 10px 20px; border: none; border-radius: 4px; background-color: #176B87; color: white; cursor: pointer;">Submit</button>
            </div>
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const startDateInput = document.getElementById('trip_start_date');
            const endDateInput = document.getElementById('trip_end_date');
            const numberOfDaysInput = document.getElementById('number_of_days');

            function calculateNumberOfDays() {
                const startDate = new Date(startDateInput.value);
                const endDate = new Date(endDateInput.value);

                if (startDate && endDate && endDate >= startDate) {
                    const timeDiff = endDate.getTime() - startDate.getTime();
                    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24)) + 1; // Including both start and end date
                    numberOfDaysInput.value = daysDiff;
                } else {
                    numberOfDaysInput.value = ''; // Clear the field if dates are invalid
                }
            }

            // Set the minimum end date to the selected start date
            function setMinEndDate() {
                endDateInput.min = startDateInput.value;
                calculateNumberOfDays();
            }

            startDateInput.addEventListener('change', function () {
                setMinEndDate();
            });

            endDateInput.addEventListener('change', calculateNumberOfDays);
        });
    </script>
{% endblock %}
